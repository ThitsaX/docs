{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\ud83d\udcd8 Platform Documentation","text":"<p>Welcome to the technical documentation for platform security and architecture.</p>"},{"location":"#security-architecture","title":"\ud83d\udd10 Security Architecture","text":"<ul> <li>Hub \u2194 PM4ML Security Architecture   Covers mTLS (transport security), JWS (application-level signing), certificate lifecycle, and trust boundaries.</li> </ul>"},{"location":"#about-this-site","title":"\ud83d\udccc About this site","text":"<p>This documentation reflects the actual implementation and operational security model used in the PM4ML ecosystem.</p>"},{"location":"hub-pm4ml-security-architecture/","title":"\ud83d\udd10 Hub \u2194 PM4ML Security Architecture","text":"<p>This document describes the actual security architecture between the Hub and PM4ML, covering mTLS (transport security) and JWS (application-level signing), based on the current PM4ML implementation.</p>"},{"location":"hub-pm4ml-security-architecture/#1-mtls-transport-level-security","title":"1. mTLS (Transport-Level Security)","text":"<p>mTLS is used to secure HTTPS communication between Hub and PM4ML. Inbound and outbound directions use different certificate lifecycles.</p>"},{"location":"hub-pm4ml-security-architecture/#2-inbound-mtls-hub-pm4ml","title":"2. Inbound mTLS (Hub \u2192 PM4ML)","text":""},{"location":"hub-pm4ml-security-architecture/#flow","title":"Flow","text":"<ul> <li>Hub initiates a connection to PM4ML</li> <li>PM4ML acts as TLS server</li> <li>PM4ML presents a server certificate</li> </ul> <pre><code>Hub \u2500\u2500mTLS\u2500\u2500\u25b6 PM4ML\n        (PM4ML server cert)\n</code></pre>"},{"location":"hub-pm4ml-security-architecture/#certificate-lifecycle","title":"Certificate lifecycle","text":"<ul> <li> <p>Certificate is:</p> </li> <li> <p>Issued by cert-manager</p> </li> <li>Backed by a Vault CA (ClusterIssuer)</li> <li>Stored as a Kubernetes <code>Secret</code></li> <li> <p>Rotation:</p> </li> <li> <p>Fully managed by cert-manager</p> </li> <li>Based on <code>duration</code> and <code>renewBefore</code></li> <li>Pods reload or restart to pick up new certs</li> </ul>"},{"location":"hub-pm4ml-security-architecture/#ownership","title":"Ownership","text":"<ul> <li>PM4ML owns and manages its server certificate</li> <li>Hub only verifies the certificate chain</li> </ul> <p>\u2714 Inbound mTLS is cert-manager\u2013managed</p>"},{"location":"hub-pm4ml-security-architecture/#3-outbound-mtls-pm4ml-hub","title":"3. Outbound mTLS (PM4ML \u2192 Hub)","text":""},{"location":"hub-pm4ml-security-architecture/#flow_1","title":"Flow","text":"<ul> <li>PM4ML initiates a connection to Hub</li> <li>PM4ML acts as TLS client</li> <li>PM4ML presents a client certificate</li> </ul> <pre><code>PM4ML \u2500\u2500mTLS\u2500\u2500\u25b6 Hub\n        (PM4ML client cert)\n</code></pre>"},{"location":"hub-pm4ml-security-architecture/#certificate-lifecycle-dfsp-trust-workflow","title":"Certificate lifecycle (DFSP trust workflow)","text":"<ul> <li> <p>PM4ML:</p> </li> <li> <p>Generates a private key + CSR</p> </li> <li>Sends CSR to Hub</li> <li> <p>Hub:</p> </li> <li> <p>Validates DFSP identity</p> </li> <li>Signs the CSR</li> <li> <p>PM4ML:</p> </li> <li> <p>Stores:</p> <ul> <li>private key</li> <li>signed certificate</li> <li>CA chain</li> <li>Storage location: Vault</li> </ul> </li> </ul>"},{"location":"hub-pm4ml-security-architecture/#rotation","title":"Rotation","text":"<ul> <li>No cert-manager involvement</li> <li> <p>Rotation is triggered by:</p> </li> <li> <p>deleting Vault secrets</p> </li> <li>restarting management-api</li> <li>management-api re-runs the CSR \u2192 Hub signing flow</li> </ul> <p>\u2714 Outbound mTLS is Vault-stored and Hub-signed \u2714 cert-manager is intentionally NOT used</p>"},{"location":"hub-pm4ml-security-architecture/#4-why-two-different-mtls-models-exist","title":"4. Why Two Different mTLS Models Exist","text":"Direction Trust owner Reason Hub \u2192 PM4ML Platform / Infra Standard service identity PM4ML \u2192 Hub Hub (business trust) DFSP onboarding &amp; approval <p>Outbound mTLS is part of DFSP trust establishment, which requires explicit Hub approval and therefore cannot be automated by cert-manager.</p>"},{"location":"hub-pm4ml-security-architecture/#5-jws-application-level-message-signing","title":"5. JWS (Application-Level Message Signing)","text":"<p>JWS is used to ensure message integrity and authenticity, independent of TLS.</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        JWS-signed payloads        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     HUB      \u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6   \u2502    PM4ML     \u2502\n\u2502              \u2502  \u25c0\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500   \u2502              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        JWS-signed payloads        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"hub-pm4ml-security-architecture/#key-model","title":"Key model","text":"<ul> <li> <p>Hub and PM4ML each own:</p> </li> <li> <p>a JWS private key</p> </li> <li>a corresponding public key</li> <li>Public keys are published to MCM Server</li> <li>Private keys are never shared</li> </ul>"},{"location":"hub-pm4ml-security-architecture/#key-properties","title":"Key properties","text":"<ul> <li> <p>JWS keys:</p> </li> <li> <p>\u274c do not expire</p> </li> <li>\u274c have no TTL</li> <li>Rotation is policy-based, not time-based</li> <li>Old keys remain valid for verification until removed</li> </ul>"},{"location":"hub-pm4ml-security-architecture/#6-jws-public-key-publishing-hub-example","title":"6. JWS Public-Key Publishing (Hub example)","text":"<pre><code>cert-manager\n   \u2502\n   \u2502 rotates switch-jws certificate\n   \u25bc\nKubernetes Secret (switch-jws)\n   \u2502\n   \u2502 initContainers:\n   \u2502  - read tls.crt\n   \u2502  - extract public key\n   \u25bc\njws-pubkey-job\n   \u2502\n   \u2502 POST /api/hub/jwscerts\n   \u25bc\nMCM Server\n</code></pre> <ul> <li>cert-manager rotates the certificate</li> <li>Public key is extracted and published</li> <li>MCM stores multiple valid public keys</li> <li>Enables safe JWS key rotation with overlap</li> </ul>"},{"location":"hub-pm4ml-security-architecture/#7-runtime-verification-flow","title":"7. Runtime Verification Flow","text":""},{"location":"hub-pm4ml-security-architecture/#hub-pm4ml","title":"Hub \u2192 PM4ML","text":"<ol> <li> <p>mTLS:</p> </li> <li> <p>PM4ML verifies Hub\u2019s TLS certificate</p> </li> <li> <p>JWS:</p> </li> <li> <p>PM4ML verifies signature using Hub public key from MCM</p> </li> </ol>"},{"location":"hub-pm4ml-security-architecture/#pm4ml-hub","title":"PM4ML \u2192 Hub","text":"<ol> <li> <p>mTLS:</p> </li> <li> <p>Hub verifies PM4ML\u2019s client certificate (Hub-signed)</p> </li> <li> <p>JWS:</p> </li> <li> <p>Hub verifies signature using PM4ML public key from MCM</p> </li> </ol> <p>Both layers must succeed for a request to be accepted.</p>"},{"location":"hub-pm4ml-security-architecture/#8-expiry-rotation-summary","title":"8. Expiry &amp; Rotation Summary","text":"Item Direction Expires? Managed by Rotation method Inbound mTLS cert (PM4ML server) Hub \u2192 PM4ML \u2705 Yes cert-manager Automatic Outbound mTLS cert (Hub as client) Hub \u2192 PM4ML \u2705 Yes Hub + Vault Manual / workflow Inbound mTLS cert (Hub server) PM4ML \u2192 Hub \u2705 Yes cert-manager Automatic Outbound mTLS cert (PM4ML as client) PM4ML \u2192 Hub \u2705 Yes PM4ML + Vault Manual / workflow JWS public key (Hub) Hub \u2192 PM4ML \u274c No MCM-Server Published on rotation JWS public key (PM4ML) PM4ML \u2192 Hub \u274c No MCM-Client Published on rotation JWT token (issued by Hub) PM4ML \u2192 Hub \u2705 Yes Application <code>exp</code> claim"},{"location":"hub-pm4ml-security-architecture/#9-key-takeaways","title":"9. Key Takeaways","text":"<ul> <li>Inbound mTLS \u2192 cert-manager\u2013managed</li> <li>Outbound mTLS \u2192 Vault-stored, Hub-signed</li> <li>JWS \u2192 key-based, no expiry, rotated by policy</li> <li>MCM is the trust registry for JWS public keys</li> </ul>"},{"location":"hub-pm4ml-security-architecture/#10-summary","title":"10. Summary","text":"<p>Hub\u2013PM4ML communication uses cert-manager\u2013managed mTLS for inbound connections, Hub-signed Vault-stored certificates for outbound connections, and JWS for message integrity with public keys distributed via MCM.</p>"}]}