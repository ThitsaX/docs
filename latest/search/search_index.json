{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\ud83d\udcd8 Platform Documentation","text":"<p>Welcome to the technical documentation for platform security and architecture within the Mojaloop ecosystem.</p> <p>This site focuses on how the platform is actually implemented and operated, rather than abstract or theoretical designs.</p>"},{"location":"#architecture","title":"\ud83c\udfd7\ufe0f Architecture","text":"<ul> <li>Platform Architecture Overview   Provides a high-level reference architecture covering:</li> <li>Mojaloop Hub, PM4ML, and Tazama</li> <li>Cloud, on-premise, and hybrid deployments</li> <li>Primary\u2013Standby topology</li> <li>Platform responsibilities and trust boundaries</li> </ul>"},{"location":"#security-architecture","title":"\ud83d\udd10 Security Architecture","text":"<ul> <li>Hub \u2194 PM4ML Security Architecture   Describes the end-to-end security model between the Hub and PM4ML, including:</li> <li>Mutual TLS (mTLS) for transport-level security  </li> <li>JWS for application-level message signing  </li> <li>Certificate lifecycle and rotation  </li> <li>Trust boundaries and ownership</li> </ul>"},{"location":"#upcoming-documentation","title":"\ud83d\udea7 Upcoming Documentation","text":"<p>The following sections are planned and will be published incrementally:</p> <ul> <li>\ud83d\udd01 Certificate &amp; Key Management</li> <li>\ud83d\udea8 Incident &amp; Failure Scenarios</li> <li>\ud83d\udcd0 Environment &amp; Capacity Model</li> <li>\u2699\ufe0f Operational Runbooks</li> </ul> <p>These documents will reflect validated production behavior and operational best practices.</p>"},{"location":"#more-information","title":"\ud83c\udf10 More information","text":"<p>For general information about ThitsaWorks, including our services and platform offerings, visit:</p> <p>\ud83d\udc49 https://thitsaworks.com</p>"},{"location":"#about-this-site","title":"\ud83d\udccc About this site","text":"<p>This documentation reflects real-world implementation and operational security practices used in Mojaloop-based deployments. It is intended for platform engineers, security engineers, and operators who need a clear and practical understanding of how the system is secured and operated in production.</p>"},{"location":"hub-pm4ml-security-architecture/","title":"\ud83d\udd10 Hub \u2194 PM4ML Security Architecture","text":"<p>This document describes the actual security architecture between the Hub and PM4ML, covering mTLS (transport security) and JWS (application-level signing), based on the current PM4ML implementation.</p>"},{"location":"hub-pm4ml-security-architecture/#1-mtls-transport-level-security","title":"1. mTLS (Transport-Level Security)","text":"<p>mTLS is used to secure HTTPS communication between Hub and PM4ML. Inbound and outbound directions use different certificate lifecycles.</p>"},{"location":"hub-pm4ml-security-architecture/#2-inbound-mtls-hub-pm4ml","title":"2. Inbound mTLS (Hub \u2192 PM4ML)","text":""},{"location":"hub-pm4ml-security-architecture/#flow","title":"Flow","text":"<ul> <li>Hub initiates a connection to PM4ML</li> <li>PM4ML acts as TLS server</li> <li>PM4ML presents a server certificate</li> </ul> <pre><code>Hub \u2500\u2500mTLS\u2500\u2500\u25b6 PM4ML\n        (PM4ML server cert)\n</code></pre>"},{"location":"hub-pm4ml-security-architecture/#certificate-lifecycle","title":"Certificate lifecycle","text":"<ul> <li> <p>Certificate is:</p> </li> <li> <p>Issued by cert-manager</p> </li> <li>Backed by a Vault CA (ClusterIssuer)</li> <li>Stored as a Kubernetes <code>Secret</code></li> <li> <p>Rotation:</p> </li> <li> <p>Fully managed by cert-manager</p> </li> <li>Based on <code>duration</code> and <code>renewBefore</code></li> <li>Pods reload or restart to pick up new certs</li> </ul>"},{"location":"hub-pm4ml-security-architecture/#ownership","title":"Ownership","text":"<ul> <li>PM4ML owns and manages its server certificate</li> <li>Hub only verifies the certificate chain</li> </ul> <p>\u2714 Inbound mTLS is cert-manager\u2013managed</p>"},{"location":"hub-pm4ml-security-architecture/#3-outbound-mtls-pm4ml-hub","title":"3. Outbound mTLS (PM4ML \u2192 Hub)","text":""},{"location":"hub-pm4ml-security-architecture/#flow_1","title":"Flow","text":"<ul> <li>PM4ML initiates a connection to Hub</li> <li>PM4ML acts as TLS client</li> <li>PM4ML presents a client certificate</li> </ul> <pre><code>PM4ML \u2500\u2500mTLS\u2500\u2500\u25b6 Hub\n        (PM4ML client cert)\n</code></pre>"},{"location":"hub-pm4ml-security-architecture/#certificate-lifecycle-dfsp-trust-workflow","title":"Certificate lifecycle (DFSP trust workflow)","text":"<ul> <li> <p>PM4ML:</p> </li> <li> <p>Generates a private key + CSR</p> </li> <li>Sends CSR to Hub</li> <li> <p>Hub:</p> </li> <li> <p>Validates DFSP identity</p> </li> <li>Signs the CSR</li> <li> <p>PM4ML:</p> </li> <li> <p>Stores:</p> <ul> <li>private key</li> <li>signed certificate</li> <li>CA chain</li> <li>Storage location: Vault</li> </ul> </li> </ul>"},{"location":"hub-pm4ml-security-architecture/#rotation","title":"Rotation","text":"<ul> <li>No cert-manager involvement</li> <li> <p>Rotation is triggered by:</p> </li> <li> <p>deleting Vault secrets</p> </li> <li>restarting management-api</li> <li>management-api re-runs the CSR \u2192 Hub signing flow</li> </ul> <p>\u2714 Outbound mTLS is Vault-stored and Hub-signed \u2714 cert-manager is intentionally NOT used</p>"},{"location":"hub-pm4ml-security-architecture/#4-why-two-different-mtls-models-exist","title":"4. Why Two Different mTLS Models Exist","text":"Direction Trust owner Reason Hub \u2192 PM4ML Platform / Infra Standard service identity PM4ML \u2192 Hub Hub (business trust) DFSP onboarding &amp; approval <p>Outbound mTLS is part of DFSP trust establishment, which requires explicit Hub approval and therefore cannot be automated by cert-manager.</p>"},{"location":"hub-pm4ml-security-architecture/#5-jws-application-level-message-signing","title":"5. JWS (Application-Level Message Signing)","text":"<p>JWS is used to ensure message integrity and authenticity, independent of TLS.</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        JWS-signed payloads        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     HUB      \u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6   \u2502    PM4ML     \u2502\n\u2502              \u2502  \u25c0\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500   \u2502              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        JWS-signed payloads        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"hub-pm4ml-security-architecture/#key-model","title":"Key model","text":"<ul> <li> <p>Hub and PM4ML each own:</p> </li> <li> <p>a JWS private key</p> </li> <li>a corresponding public key</li> <li>Public keys are published to MCM Server</li> <li>Private keys are never shared</li> </ul>"},{"location":"hub-pm4ml-security-architecture/#key-properties","title":"Key properties","text":"<ul> <li> <p>JWS keys:</p> </li> <li> <p>\u274c do not expire</p> </li> <li>\u274c have no TTL</li> <li>Rotation is policy-based, not time-based</li> <li>Old keys remain valid for verification until removed</li> </ul>"},{"location":"hub-pm4ml-security-architecture/#6-jws-public-key-publishing-hub-example","title":"6. JWS Public-Key Publishing (Hub example)","text":"<pre><code>cert-manager\n   \u2502\n   \u2502 rotates switch-jws certificate\n   \u25bc\nKubernetes Secret (switch-jws)\n   \u2502\n   \u2502 initContainers:\n   \u2502  - read tls.crt\n   \u2502  - extract public key\n   \u25bc\njws-pubkey-job\n   \u2502\n   \u2502 POST /api/hub/jwscerts\n   \u25bc\nMCM Server\n</code></pre> <ul> <li>cert-manager rotates the certificate</li> <li>Public key is extracted and published</li> <li>MCM stores multiple valid public keys</li> <li>Enables safe JWS key rotation with overlap</li> </ul>"},{"location":"hub-pm4ml-security-architecture/#7-runtime-verification-flow","title":"7. Runtime Verification Flow","text":""},{"location":"hub-pm4ml-security-architecture/#hub-pm4ml","title":"Hub \u2192 PM4ML","text":"<ol> <li> <p>mTLS:</p> </li> <li> <p>PM4ML verifies Hub\u2019s TLS certificate</p> </li> <li> <p>JWS:</p> </li> <li> <p>PM4ML verifies signature using Hub public key from MCM</p> </li> </ol>"},{"location":"hub-pm4ml-security-architecture/#pm4ml-hub","title":"PM4ML \u2192 Hub","text":"<ol> <li> <p>mTLS:</p> </li> <li> <p>Hub verifies PM4ML\u2019s client certificate (Hub-signed)</p> </li> <li> <p>JWS:</p> </li> <li> <p>Hub verifies signature using PM4ML public key from MCM</p> </li> </ol> <p>Both layers must succeed for a request to be accepted.</p>"},{"location":"hub-pm4ml-security-architecture/#8-expiry-rotation-summary","title":"8. Expiry &amp; Rotation Summary","text":"Item Direction Expires? Managed by Rotation method Inbound mTLS cert (PM4ML server) Hub \u2192 PM4ML \u2705 Yes cert-manager Automatic Outbound mTLS cert (Hub as client) Hub \u2192 PM4ML \u2705 Yes Hub + Vault Manual / workflow Inbound mTLS cert (Hub server) PM4ML \u2192 Hub \u2705 Yes cert-manager Automatic Outbound mTLS cert (PM4ML as client) PM4ML \u2192 Hub \u2705 Yes PM4ML + Vault Manual / workflow JWS public key (Hub) Hub \u2192 PM4ML \u274c No MCM-Server Published on rotation JWS public key (PM4ML) PM4ML \u2192 Hub \u274c No MCM-Client Published on rotation JWT token (issued by Hub) PM4ML \u2192 Hub \u2705 Yes Application <code>exp</code> claim"},{"location":"hub-pm4ml-security-architecture/#9-key-takeaways","title":"9. Key Takeaways","text":"<ul> <li>Inbound mTLS \u2192 cert-manager\u2013managed</li> <li>Outbound mTLS \u2192 Vault-stored, Hub-signed</li> <li>JWS \u2192 key-based, no expiry, rotated by policy</li> <li>MCM is the trust registry for JWS public keys</li> </ul>"},{"location":"hub-pm4ml-security-architecture/#10-summary","title":"10. Summary","text":"<p>Hub\u2013PM4ML communication uses cert-manager\u2013managed mTLS for inbound connections, Hub-signed Vault-stored certificates for outbound connections, and JWS for message integrity with public keys distributed via MCM.</p>"},{"location":"platform-architecture-overview/","title":"\ud83c\udfd7\ufe0f Platform Architecture Overview","text":"<p>Hub, PM4ML, and Tazama (Cloud &amp; On-Premise)</p> <p>This document describes the reference architecture for deploying the Mojaloop Hub, PM4ML (Payment Manager for Mojaloop), and Tazama platforms across cloud and on-premise datacenter environments.</p> <p>The architecture focuses on deployment topology, platform responsibilities, security boundaries, and operational separation, without exposing environment-specific or sensitive implementation details.</p> <p>Note This document presents a reference architecture based on commonly adopted deployment patterns. Specific implementations may vary depending on regulatory, organizational, and operational requirements.</p>"},{"location":"platform-architecture-overview/#1-architectural-goals","title":"1. Architectural Goals","text":"<p>The architecture is designed to:</p> <ul> <li>Support secure financial transactions</li> <li>Enable cloud, on-premise, and hybrid deployments</li> <li>Provide operational resilience using a Primary\u2013Standby model</li> <li>Maintain clear trust and responsibility boundaries between platforms</li> <li>Scale predictably based on transaction throughput</li> </ul>"},{"location":"platform-architecture-overview/#2-deployment-topology-primarystandby","title":"2. Deployment Topology (Primary\u2013Standby)","text":"<p>The platform is deployed across two independent sites:</p>"},{"location":"platform-architecture-overview/#primary-site","title":"Primary Site","text":"<ul> <li>Active production environment</li> <li>Handles live transaction traffic</li> <li>Deployed in:</li> <li>Public cloud or</li> <li>On-premise datacenter</li> </ul>"},{"location":"platform-architecture-overview/#standby-site","title":"Standby Site","text":"<ul> <li>Secondary environment with reduced capacity</li> <li>Maintained for service continuity</li> <li>Deployed in a separate cloud region or physical datacenter</li> </ul> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        Secure Connectivity       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Primary Site \u2502  \u25c0\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6  \u2502  Standby Site \u2502\n\u2502               \u2502                                  \u2502               \u2502\n\u2502 Hub           \u2502                                  \u2502 Hub           \u2502\n\u2502 PM4ML         \u2502                                  \u2502 PM4ML         \u2502\n\u2502 Tazama        \u2502                                  \u2502 Tazama        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n````\n\nBoth sites share the same logical architecture. Differences are limited to **capacity sizing**, not functionality.\n\n---\n\n## 3. Platform Components\n\n### 3.1 Mojaloop Hub\n\n* Central transaction switching platform\n* Enables interoperability between participants\n* Deployed as containerized services\n* Acts as the **trust authority** for DFSP onboarding\n\n---\n\n### 3.2 PM4ML (Payment Manager for Mojaloop)\n\n* DFSP-facing payment management platform\n* Can be deployed:\n\n  * Per DFSP, or\n  * As a shared service\n* Supports both cloud-hosted and on-premise environments\n* Establishes business trust with the Hub\n\n---\n\n### 3.3 Tazama\n\n* Transaction monitoring and fraud detection platform\n* Consumes transaction events for analysis\n* Can be deployed centrally or regionally\n* Operates independently of transaction processing paths\n\n---\n\n## 4. Infrastructure Architecture\n\n### Runtime Platform\n\n* Kubernetes used as the common orchestration layer\n* Consistent deployment patterns across environments\n\n### Networking\n\n* Private, encrypted communication between platforms\n* Hybrid connectivity supported for cloud \u2194 on-premise scenarios\n\n### Traffic Management\n\n* Controlled ingress and egress for platform services\n* Clear separation between internal and external traffic paths\n\n### Data Services\n\n* Databases and messaging systems sized per expected throughput\n* Logical isolation maintained between platforms\n\n---\n\n## 5. Security Architecture (High Level)\n\n```text\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      mTLS + JWS       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Hub   \u2502  \u25c0\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6   \u2502  PM4ML  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u2502  Transaction Events\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Tazama  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"platform-architecture-overview/#security-principles","title":"Security Principles","text":"<ul> <li>Encrypted communication for all inter-platform traffic</li> <li>Strong platform identity and authentication</li> <li>Separation of infrastructure trust and business trust</li> <li>Centralized secrets and key management</li> </ul> <p>Detailed mTLS and JWS mechanisms are documented separately.</p>"},{"location":"platform-architecture-overview/#6-availability-and-resilience","title":"6. Availability and Resilience","text":"<ul> <li>High availability within each site</li> <li>No active-active transaction processing across sites</li> <li>Standby site maintained in a ready state</li> <li>Recovery and failover procedures defined outside this document</li> </ul>"},{"location":"platform-architecture-overview/#7-operational-model","title":"7. Operational Model","text":"<ul> <li>Infrastructure provisioned using automation</li> <li>Platform deployments follow GitOps practices</li> <li>Centralized monitoring, logging, and alerting</li> <li>Consistent operations across cloud and on-premise environments</li> </ul>"},{"location":"platform-architecture-overview/#8-scope-clarification","title":"8. Scope Clarification","text":"<p>This document covers:</p> <ul> <li>Platform roles and responsibilities</li> <li>Deployment topology</li> <li>High-level security and connectivity patterns</li> </ul> <p>This document does not include:</p> <ul> <li>Environment-specific configurations</li> <li>Backup and restore procedures</li> <li>Incident response or failover runbooks</li> <li>Regulatory or compliance controls</li> </ul>"},{"location":"platform-architecture-overview/#9-key-takeaways","title":"9. Key Takeaways","text":"<ul> <li>A single architecture supports cloud, on-premise, and hybrid deployments</li> <li>Primary\u2013Standby model balances resilience and cost</li> <li>Hub, PM4ML, and Tazama have clearly separated responsibilities</li> <li>Security is enforced at both transport and application layers</li> </ul>"},{"location":"platform-architecture-overview/#10-summary","title":"10. Summary","text":"<p>The Mojaloop Hub, PM4ML, and Tazama platforms are deployed using a consistent, secure, and flexible architecture that supports cloud and on-premise environments while maintaining clear trust boundaries and operational resilience.</p>"}]}